import{s as z,a as q,n as F,r as I}from"../chunks/scheduler.Bb3v1ohj.js";import{S as N,i as V,e as w,s as B,c as x,f as _,g as O,h as D,d as b,a as d,b as A,j as y,t as M,k as H}from"../chunks/index.PYyVCeOJ.js";import{p as J,i as $,a as G}from"../chunks/entry.Df8Yo-g1.js";function K(o){const e=JSON.parse(o);return e.data&&(e.data=J(e.data)),e}function P(o){return HTMLElement.prototype.cloneNode.call(o)}function C(o,e=()=>{}){const n=async({action:l,result:s,reset:t=!0,invalidateAll:a=!0})=>{s.type==="success"&&(t&&HTMLFormElement.prototype.reset.call(o),a&&await $()),(location.origin+location.pathname===l.origin+l.pathname||s.type==="redirect"||s.type==="error")&&G(s)};async function r(l){var L,c,m,h,T;if(((L=l.submitter)!=null&&L.hasAttribute("formmethod")?l.submitter.formMethod:P(o).method)!=="post")return;l.preventDefault();const t=new URL((c=l.submitter)!=null&&c.hasAttribute("formaction")?l.submitter.formAction:P(o).action),a=(m=l.submitter)!=null&&m.hasAttribute("formenctype")?l.submitter.formEnctype:P(o).enctype,i=new FormData(o),k=(h=l.submitter)==null?void 0:h.getAttribute("name");k&&i.append(k,((T=l.submitter)==null?void 0:T.getAttribute("value"))??"");const v=new AbortController;let E=!1;const u=await e({action:t,cancel:()=>E=!0,controller:v,formData:i,formElement:o,submitter:l.submitter})??n;if(E)return;let g;try{const p=new Headers({accept:"application/json","x-sveltekit-action":"true"});a!=="multipart/form-data"&&p.set("Content-Type",/^(:?application\/x-www-form-urlencoded|text\/plain)$/.test(a)?a:"application/x-www-form-urlencoded");const j=a==="multipart/form-data"?i:new URLSearchParams(i),S=await fetch(t,{method:"POST",headers:p,cache:"no-store",body:j,signal:v.signal});g=K(await S.text()),g.type==="error"&&(g.status=S.status)}catch(p){if((p==null?void 0:p.name)==="AbortError")return;g={type:"error",error:p}}u({action:t,formData:i,formElement:o,update:p=>n({action:t,result:g,reset:p==null?void 0:p.reset,invalidateAll:p==null?void 0:p.invalidateAll}),result:g})}return HTMLFormElement.prototype.addEventListener.call(o,"submit",r),{destroy(){HTMLFormElement.prototype.removeEventListener.call(o,"submit",r)}}}function R(o){let e,n,r,l,s;return{c(){e=w("p"),n=M("Bounty was deployed successfully: "),r=w("a"),l=M("Transaction Link!"),this.h()},l(t){e=x(t,"P",{class:!0});var a=_(e);n=H(a,"Bounty was deployed successfully: "),r=x(a,"A",{href:!0,class:!0,target:!0,rel:!0});var i=_(r);l=H(i,"Transaction Link!"),i.forEach(b),a.forEach(b),this.h()},h(){var t;d(r,"href",s="https://whatsonchain.com/tx/"+((t=o[0])==null?void 0:t.txid)),d(r,"class","text-blue-500 underline"),d(r,"target","_blank"),d(r,"rel","noopener noreferrer"),d(e,"class","pt-2 text-center text-green-500")},m(t,a){A(t,e,a),y(e,n),y(e,r),y(r,l)},p(t,a){var i;a&1&&s!==(s="https://whatsonchain.com/tx/"+((i=t[0])==null?void 0:i.txid))&&d(r,"href",s)},d(t){t&&b(e)}}}function U(o){let e,n,r,l,s;return{c(){e=w("p"),n=M("Bounty was unlocked successfully: "),r=w("a"),l=M("Transaction Link!"),this.h()},l(t){e=x(t,"P",{class:!0});var a=_(e);n=H(a,"Bounty was unlocked successfully: "),r=x(a,"A",{href:!0,class:!0,target:!0,rel:!0});var i=_(r);l=H(i,"Transaction Link!"),i.forEach(b),a.forEach(b),this.h()},h(){var t;d(r,"href",s="https://whatsonchain.com/tx/"+((t=o[0])==null?void 0:t.txid)),d(r,"class","text-blue-500 underline"),d(r,"target","_blank"),d(r,"rel","noopener noreferrer"),d(e,"class","pt-2 text-center text-green-500")},m(t,a){A(t,e,a),y(e,n),y(e,r),y(r,l)},p(t,a){var i;a&1&&s!==(s="https://whatsonchain.com/tx/"+((i=t[0])==null?void 0:i.txid))&&d(r,"href",s)},d(t){t&&b(e)}}}function Q(o){var g,L;let e,n,r='<div class="flex flex-wrap -mx-3 mb-2"><div class="w-full md:w-1/3 px-3 mb-6 md:mb-0"><label class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2" for="bounty">Bounty</label> <input class="appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500" id="bounty" type="number" placeholder="Enter bounty amount" name="bounty"/></div> <div class="w-full md:w-1/3 px-3 mb-6 md:mb-0"><label class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2" for="square">Enter the number whose square root is on bounty</label> <input class="appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500" id="square" type="number" placeholder="Enter square number" name="square"/></div> <button type="submit" class="bg-yellow-500 hover:bg-blue-700 text-white font-bold mt-5 ml-2 px-2 rounded">Deploy Bounty</button></div>',l,s,t,a,i='<div class="flex flex-wrap -mx-3 mb-2"><div class="w-full md:w-1/3 px-3 mb-6 md:mb-0"><label class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2" for="root">Root</label> <input class="appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500" id="root" type="number" placeholder="Enter root answer" name="root"/></div> <button type="submit" class="bg-yellow-500 hover:bg-blue-700 text-white font-bold mt-5 ml-2 px-2 rounded">Unlock Bounty</button></div>',k,v,E,f=((g=o[0])==null?void 0:g.deployed)&&R(o),u=((L=o[0])==null?void 0:L.success)&&U(o);return{c(){e=w("div"),n=w("form"),n.innerHTML=r,l=B(),f&&f.c(),s=B(),t=w("div"),a=w("form"),a.innerHTML=i,k=B(),u&&u.c(),this.h()},l(c){e=x(c,"DIV",{class:!0});var m=_(e);n=x(m,"FORM",{method:!0,action:!0,"data-svelte-h":!0}),O(n)!=="svelte-1gakpzl"&&(n.innerHTML=r),l=D(m),f&&f.l(m),m.forEach(b),s=D(c),t=x(c,"DIV",{class:!0});var h=_(t);a=x(h,"FORM",{method:!0,action:!0,"data-svelte-h":!0}),O(a)!=="svelte-15iemg"&&(a.innerHTML=i),k=D(h),u&&u.l(h),h.forEach(b),this.h()},h(){d(n,"method","POST"),d(n,"action","?/deploy"),d(e,"class","mt-10 pt-10 w-full max-w-xl p-12 mx-auto rounded-lg shadow-xl dark:bg-white/10 bg-white/30 ring-1 ring-gray-900/5 backdrop-blur-lg"),d(a,"method","POST"),d(a,"action","?/unlock"),d(t,"class","mt-10 pt-10 w-full max-w-xl p-12 mx-auto rounded-lg shadow-xl dark:bg-white/10 bg-white/30 ring-1 ring-gray-900/5 backdrop-blur-lg")},m(c,m){A(c,e,m),y(e,n),y(e,l),f&&f.m(e,null),A(c,s,m),A(c,t,m),y(t,a),y(t,k),u&&u.m(t,null),v||(E=[q(C.call(null,n)),q(C.call(null,a))],v=!0)},p(c,[m]){var h,T;(h=c[0])!=null&&h.deployed?f?f.p(c,m):(f=R(c),f.c(),f.m(e,null)):f&&(f.d(1),f=null),(T=c[0])!=null&&T.success?u?u.p(c,m):(u=U(c),u.c(),u.m(t,null)):u&&(u.d(1),u=null)},i:F,o:F,d(c){c&&(b(e),b(s),b(t)),f&&f.d(),u&&u.d(),v=!1,I(E)}}}function W(o,e,n){let{form:r}=e;return o.$$set=l=>{"form"in l&&n(0,r=l.form)},[r]}class ee extends N{constructor(e){super(),V(this,e,W,Q,z,{form:0})}}export{ee as component};
